<!DOCTYPE html>
<html>
    <head>
        <base target="_parent" />

        <title></title>

        <link href="css/bookeasy.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">

    </head>

    <body>

        <div id="toolbar-cart" data-ng-class="toolbarClass"></div>

        <div class="js-details-gadget--ve" id="content"></div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>

        <script src="js/bookeasy-mods.js"></script>

        <script src="//gadgets.impartmedia.com/gadgets.jsz?key=d5192d41822d0c987a0610af120d29bf"></script>
        <script src="js/iframeResizer.contentWindow.js"></script>

        <script>

            var bAllowBookings = true;
            var bookeasyData = {};
            var bookeasyType = 'tours'; // defaults to accomodation
            var bookingDate = new Date(); // get today's date
            var productID = '67625'; // set productID to display
            var iFrameResizer = {
                messageCallback: function(message){
                    alert(message,parentIFrame.getId());
                }
            }

            $(function() {

                // load details gadget
                BE.gadget.details('.js-details-gadget--ve', {
                    defaultDate: bookingDate,
                    descriptionHover: true,
                    period: 1,
                    productID: productID,
                    showHoverInline: true,
                    showQuantity: false,
                    thumbsInGrid: true,
                    type: bookeasyType,
                    vcID: 188
                });

                $('#toolbar-cart .checkout').IMElementExists(function(){
                    parentIFrame.sendMessage('has-cart-items');
                });

                $('#wdOverlayContent').IMElementExists(function(){
                    parentIFrame.sendMessage('overlay-open');
                });

                $('body').on('click', '#wdOverlayBlockout', function() {
                    parentIFrame.sendMessage('overlay-closed');
                });

                $('body').on('click', '#wdOverlayClose', function() {
                    parentIFrame.sendMessage('overlay-closed');
                });

            });





            // Initialise the cart gadget
            $(function() {
                var gadgetOptions = {
                        vcID: '188',
                        bookingURL: 'http://www.environment.sa.gov.au/parks/Find_a_Park/Browse_by_region/Yorke_Peninsula/innes-national-park/kiosk/checkout',
                        autoCollapse: true,
                        overlaySettings: {
                            useBlockout: true,
                            overlayColour: '#777',
                            overlayOpacity: 0.5,
                            innerBackground: '#fff',
                            zIndexLowest: 1000000,
                            width: 1000,
                            height: false
                        }
                    },
                    gadgetSelector = '#toolbar-cart';

                BE.gadget.cart(gadgetSelector, gadgetOptions);
            }());

        </script>

    </body>

</html>
