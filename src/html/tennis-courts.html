<!DOCTYPE html>
<html>
    <head>
        <base target="_parent" />

        <title>Tennis courts</title>

        <link href="css/bookeasy.css" rel="stylesheet">
        <link href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">

    </head>

    <body>

        <div id="toolbar-cart" style="display: none;"></div>

        <div id="bookeasy__cart-gadget"></div>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>

        <script src="js/bookeasy-mods.js"></script>

        <script src="//gadgets.impartmedia.com/gadgets.jsz?key=d5192d41822d0c987a0610af120d29bf"></script>
        <script src="js/iframeResizer.contentWindow.js"></script>

        <script>

            var bAllowBookings = true;
            var bookeasyData = {};
            var bookeasyType = 'tours'; // defaults to accomodation
            var bookingDate = new Date(); // get today's date
            var productID = '67622'; // set productID to display
            var iFrameResizer = {
                messageCallback: function(message){
                    alert(message,parentIFrame.getId());
                }
            }

            $(function() {

                // load details gadget
                BE.gadget.details('#bookeasy__cart-gadget', {
                    defaultDate: bookingDate,
                    descriptionHover: true,
                    period: 1,
                    productID: productID,
                    showHoverInline: true,
                    showQuantity: false,
                    thumbsInGrid: true,
                    type: bookeasyType,
                    vcID: 188
                });

                $('.be-fancybox').fancybox({
                    topRatio: 0,
                    afterLoad: function(current, previous) {
                        parentIFrame.sendMessage('overlay-open');
                    },
                    afterClose: function(current, previous) {
                        parentIFrame.sendMessage('overlay-closed');
                    }
                });

                $('#toolbar-cart .checkout').IMElementExists(function(){
                    parentIFrame.sendMessage('has-cart-items');
                });

                $('#wdOverlayContent').IMElementExists(function(){
                    parentIFrame.sendMessage('overlay-open');
                });

                $('body').on('click', '#wdOverlayBlockout', function() {
                    parentIFrame.sendMessage('overlay-closed');
                });

                $('body').on('click', '#wdOverlayClose', function() {
                    parentIFrame.sendMessage('overlay-closed');
                });

            });





            // Initialise the cart gadget
            $(function() {
                var gadgetOptions = {
                        vcID: '188',
                        bookingURL: './checkout.html',
                        autoCollapse: true,
                        overlaySettings: {
                            useBlockout: true,
                            overlayColour: '#000',
                            overlayOpacity: 0.75,
                            innerBackground: '#fff',
                            zIndexLowest: 1000000,
                            width: 1000,
                            height: false
                        }
                    },
                    gadgetSelector = '#toolbar-cart';

                BE.gadget.cart(gadgetSelector, gadgetOptions);
            }());

        </script>

    </body>

</html>
